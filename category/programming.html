<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog - programming</title>
        <link rel="stylesheet" href="https://til.grayvines.com/theme/css/main.css" />
        <link href="https://til.grayvines.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://til.grayvines.com/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="https://til.grayvines.com/category/design.html">design</a></li>
                    <li><a href="https://til.grayvines.com/category/food.html">food</a></li>
                    <li><a href="https://til.grayvines.com/category/health.html">health</a></li>
                    <li><a href="https://til.grayvines.com/category/history.html">history</a></li>
                    <li><a href="https://til.grayvines.com/category/language.html">language</a></li>
                    <li><a href="https://til.grayvines.com/category/math.html">math</a></li>
                    <li><a href="https://til.grayvines.com/category/misc.html">misc</a></li>
                    <li><a href="https://til.grayvines.com/category/music.html">music</a></li>
                    <li><a href="https://til.grayvines.com/category/physics.html">physics</a></li>
                    <li class="active"><a href="https://til.grayvines.com/category/programming.html">programming</a></li>
                    <li><a href="https://til.grayvines.com/category/python.html">python</a></li>
                    <li><a href="https://til.grayvines.com/category/theorems.html">theorems</a></li>
                    <li><a href="https://til.grayvines.com/category/travel.html">travel</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://til.grayvines.com/bpf.html">BPF</a></h1>
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info --><div class="section" id="jit">
<h2>JIT</h2>
<p>A restricted subset of C is compiled via <tt class="docutils literal">clang</tt> to eBPF bytecode, and the
Linux kernel contains a JIT (and of course a VM) to execute it.</p>
</div>
<div class="section" id="bcc">
<h2><tt class="docutils literal">bcc</tt></h2>
<p><a class="reference external" href="https://github.com/iovisor/bcc">bcc</a> is a higher level toolkit for
interacting with eBPF (including via Python). For example:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bcc</span> <span class="kn">import</span> <span class="n">BPF</span>

<span class="n">BPF</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        int kprobe__sys_clone(void *ctx) {</span>
<span class="s2">            bpf_trace_printk(&quot;Hello, World!</span><span class="se">\\</span><span class="s2">n&quot;);</span>
<span class="s2">            return 0;</span>
<span class="s2">        }</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">trace_print</span><span class="p">()</span>
</pre></div>
<p>will attach a simple print callback whenever a new process is spawned (via
<tt class="docutils literal">clone(2)</tt>).</p>
</div>
<div class="section" id="bpf-based-tools">
<h2>BPF-based tools</h2>
<p>Brendan Gregg has a great <a class="reference external" href="http://www.brendangregg.com/ebpf.html">diagram and post</a> of the various BPF-using
tools, and which part of the stack they trace.</p>
</div>
<div class="section" id="more-tracing">
<h2>More Tracing</h2>
<p>Julia Evans's <a class="reference external" href="https://jvns.ca/blog/2017/07/05/linux-tracing-systems/">Linux tracing systems &amp; how they fit together</a> is pretty great
reading &amp; reference for context beyond just BPF.</p>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/coreutils.html" rel="bookmark"
                           title="Permalink to coreutils">coreutils</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><tt class="docutils literal">mkdir <span class="pre">-p</span></tt> will create a directory with its parents. But <tt class="docutils literal">cp</tt> takes a
parents option as well.</p>
<p><tt class="docutils literal">cp <span class="pre">--parents</span> foo/bar/baz/quux.txt some/directory</tt> will create
<tt class="docutils literal">some/directory/foo/bar/baz/quux.txt</tt> without any of the other
directory structure from the original location.</p>

                <a class="readmore" href="https://til.grayvines.com/coreutils.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/dstat.html" rel="bookmark"
                           title="Permalink to dstat">dstat</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><a class="reference external" href="http://dag.wiee.rs/home-made/dstat/">dstat</a> can replace a bunch of other
statistical performance counting things (I/O, CPU, Disk, Network, Syscalls,
etc.).</p>

                <a class="readmore" href="https://til.grayvines.com/dstat.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/firefox.html" rel="bookmark"
                           title="Permalink to Firefox">Firefox</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p>The Firefox Dev Tools console defines a <tt class="docutils literal">copy()</tt> function which will copy
text to the clipboard.</p>
<p>For some reason, using <tt class="docutils literal"><span class="pre">navigator.clipboard.writeText(&quot;asdf&quot;)</span></tt>, which <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText">seems
to be the normal way to do this</a> fires
a rejected promise. Probably something to do with the console environment being
different and weird …</p>
                <a class="readmore" href="https://til.grayvines.com/firefox.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/git.html" rel="bookmark"
                           title="Permalink to Git">Git</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><em>git you magnificent beast...</em></p>
<div class="section" id="finding-the-history-of-a-function-or-object">
<h2>Finding the History of a Function or Object</h2>
<p><tt class="docutils literal">log <span class="pre">-L</span> :foo</tt> will show you the history of the function/object called
<tt class="docutils literal">foo</tt>. This is a smarter version of normal <tt class="docutils literal">log <span class="pre">-L</span></tt> which just knows about
lines.</p>
<p>But because I'm lazy to even type this out, I …</p></div>
                <a class="readmore" href="https://til.grayvines.com/git.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/less.html" rel="bookmark"
                           title="Permalink to less">less</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <div class="section" id="less-s">
<h2><tt class="docutils literal">less <span class="pre">-S</span></tt></h2>
<p><tt class="docutils literal"><span class="pre">-S</span></tt> will disable soft line breaks within <tt class="docutils literal">less</tt>, allowing horizontal
scrolling.</p>
</div>
<div class="section" id="tailing-files">
<h2>Tailing Files</h2>
<p>Use <tt class="docutils literal">less +F</tt> instead of <tt class="docutils literal">tail <span class="pre">-f</span></tt>. It works the same, but supports
interrupting the stream with <tt class="docutils literal">SIGINT</tt> to e.g. search around, and then can
resume tailing by hitting <tt class="docutils literal">F</tt> again.</p>
<p>Doing so will …</p></div>
                <a class="readmore" href="https://til.grayvines.com/less.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/namei.html" rel="bookmark"
                           title="Permalink to namei">namei</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><tt class="docutils literal">namei(1)</tt> (provided by <tt class="docutils literal"><span class="pre">util-linux</span></tt> on macOS) is a nifty utility for fully
resolving symbolic links.</p>
<p>Given a chain of links, it will show e.g.:</p>
<div class="highlight"><pre><span></span><span class="go">⊙  namei =python                                                                                                                                                                                julian@Air ●</span>
<span class="go">f: /Users/julian/.local/bin/python</span>
<span class="go">d /</span>
<span class="go">d Users</span>
<span class="go">d julian</span>
<span class="go">l .local -&gt; /Users/julian/.dotfiles/.local</span>
<span class="go">d /</span>
<span class="go">d Users …</span></pre></div>
                <a class="readmore" href="https://til.grayvines.com/namei.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/pv.html" rel="bookmark"
                           title="Permalink to pv">pv</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><a class="reference external" href="http://ivarch.com/programs/pv.shtml">pv</a> is a useful utility to insert in
shell pipelines for watching how much data passes through the pipe.</p>
<p><a class="reference external" href="https://www.cyberciti.biz/open-source/command-line-hacks/pv-command-examples/">This page</a>
has a few simple examples, and there are more I'm sure with some googling
around.</p>

                <a class="readmore" href="https://til.grayvines.com/pv.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/socat.html" rel="bookmark"
                           title="Permalink to socat"><tt class="docutils literal">socat</tt></a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p>Use <tt class="docutils literal">socat</tt> instead of <tt class="docutils literal">netcat</tt>. It takes something more like endpoint
syntax (and does many more kinds of ports and configurable connectivity that
come with them).</p>
<p>Tons of examples <a class="reference external" href="http://www.dest-unreach.org/socat/doc/socat.html#EXAMPLES">here</a>.</p>

                <a class="readmore" href="https://til.grayvines.com/socat.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/u2f-and-openssh.html" rel="bookmark"
                           title="Permalink to U2F and OpenSSH">U2F and OpenSSH</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <p><a class="reference external" href="http://www.openssh.com/txt/release-8.2">As of OpenSSH 8.2</a>, OpenSSH
now supports U2F for authentication.</p>
<p>This is a totally separate authentication mechanism entirely from say,
ED25519 host keys with a second factor; here, the U2F (e.g. Yubikey)
<em>is</em> / <em>has</em> the key on it.</p>
<p>To use it though, both sides (server and client) have …</p>
                <a class="readmore" href="https://til.grayvines.com/u2f-and-openssh.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://til.grayvines.com/zsh.html" rel="bookmark"
                           title="Permalink to zsh">zsh</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-25T13:55:10.683811-04:00">
                Published: Mon 25 May 2020
        </abbr>

<p>In <a href="https://til.grayvines.com/category/programming.html">programming</a>.</p>

</footer><!-- /.post-info -->                <div class="section" id="id1">
<h2><tt class="docutils literal">&amp;|</tt></h2>
<p>Piping using <tt class="docutils literal">foo &amp;| bar</tt> will pipe both stdout <em>and</em> stderr to <tt class="docutils literal">bar</tt>.</p>
</div>
<div class="section" id="multios">
<h2><tt class="docutils literal">MULTIOS</tt></h2>
<p>With <tt class="docutils literal">MULTIOS</tt> enabled, multiple outputs to the same file descriptor can be
provided, similar to using <tt class="docutils literal">tee</tt>.</p>
<p>In other words:</p>
<pre class="literal-block">
$ date &gt;foo &gt;bar
</pre>
<p>will output <tt class="docutils literal">date</tt> to both <tt class="docutils literal">foo</tt> and <tt class="docutils literal">bar</tt>. (Piping it will also work
since …</p></div>
                <a class="readmore" href="https://til.grayvines.com/zsh.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://til.grayvines.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>